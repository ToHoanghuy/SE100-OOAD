{"ast":null,"code":"var _jsxFileName = \"/Users/nguyenphucthinh/Documents/study/se100-ooad/SE100-OOAD/SE100-OOAD/user-role/src/components/BookingSearchBar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport DateTimeBar from '../components/DateTimeBar';\nimport QuantityBar from '../components/QuantityBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction BookingSearchBar() {\n  _s();\n  const [showOptions, setShowOptions] = useState([false, false]); // Mảng trạng thái cho các dropdown\n  const selectionOptionRefs = useRef([]); // Mảng ref cho selectionOption\n  const selectionBtnRefs = useRef([]); // Mảng ref cho selectionBtn\n\n  const toggleOption = index => {\n    setShowOptions(prevState => {\n      const newState = [...prevState];\n      newState.forEach((_, i) => {\n        if (i !== index) {\n          selectionOptionRefs.current[i].style.display = 'none';\n          newState[i] = false; // Đóng dropdown ở các index khác\n        }\n      });\n      newState[index] = !newState[index]; // Đảo ngược trạng thái cho index cụ thể\n      if (selectionOptionRefs.current[index]) {\n        if (newState[index]) {\n          // Khi mở dropdown\n          selectionOptionRefs.current[index].style.display = 'block';\n          const rect = selectionBtnRefs.current[index].getBoundingClientRect();\n          const windowHeight = window.innerHeight;\n          if (rect.bottom > windowHeight / 2) {\n            //option xuất hiện trên btn\n            selectionOptionRefs.current[index].style.top = 'auto';\n            selectionOptionRefs.current[index].style.bottom = `calc(100% + 10px)`; // Cách button 10px\n            const icon = selectionBtnRefs.current[index].querySelector('.fa-solid.fa-angle-down');\n            if (icon) {\n              icon.classList.remove(\"fa-angle-down\");\n              icon.classList.add(\"fa-angle-up\");\n            }\n          } else {\n            selectionOptionRefs.current[index].style.bottom = 'auto';\n            selectionOptionRefs.current[index].style.top = `calc(100% + 5px)`; // Cách button 5px\n            const icon = selectionBtnRefs.current[index].querySelector('.fa-solid.fa-angle-up');\n            if (icon) {\n              icon.classList.remove(\"fa-angle-up\");\n              icon.classList.add(\"fa-angle-down\");\n            }\n          }\n        } else {\n          // Khi đóng dropdown\n          selectionOptionRefs.current[index].style.display = 'none';\n        }\n      }\n      return newState; // Trả về trạng thái mới\n    });\n  };\n\n  //dùng useEffect để khi click vào bất kì vị trí trong window để ẩn selection option\n  useEffect(() => {\n    const handleClickOutside = event => {\n      const isClickInside = event.target.closest('.selection_btn');\n      const dateTime = event.target.closest('.date_time .selection_option');\n      // Nếu click ra ngoài .selection_btn và .selection_option\n      if (!isClickInside && !dateTime) {\n        setShowOptions(prevState => {\n          const newState = [...prevState];\n          newState.forEach((_, i) => {\n            // alert('hi');\n            selectionOptionRefs.current[i].style.display = 'none';\n            newState[i] = false; // Đóng dropdown ở các index khác\n          });\n          return newState;\n        });\n      }\n    };\n    // Thêm sự kiện khi component được mount\n    document.addEventListener('click', handleClickOutside);\n    // Dọn dẹp sự kiện khi component bị unmount\n    return () => {\n      document.removeEventListener('click', handleClickOutside);\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"booking_search_bar OpacityEffect\",\n    children: [/*#__PURE__*/_jsxDEV(DateTimeBar, {\n      toggleOption: () => toggleOption(0),\n      showOptions: showOptions[0],\n      selectionBtnRef: el => selectionBtnRefs.current[0] = el // Gán ref động cho selectionBtn\n      ,\n      selectionOptionRef: el => selectionOptionRefs.current[0] = el // Gán ref động cho selectionOption\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(QuantityBar, {\n      toggleOption: () => toggleOption(1),\n      showOptions: showOptions[1],\n      selectionBtnRef: el => selectionBtnRefs.current[1] = el // Gán ref động cho selectionBtn\n      ,\n      selectionOptionRef: el => selectionOptionRefs.current[1] = el // Gán ref động cho selectionOption\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      class: \"booking_search_btn\",\n      children: \"T\\xECm ki\\u1EBFm\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 9\n  }, this);\n}\n_s(BookingSearchBar, \"HoB+7Q8Q6T8dapIkfogwV+z70rA=\");\n_c = BookingSearchBar;\n;\nexport default BookingSearchBar;\nvar _c;\n$RefreshReg$(_c, \"BookingSearchBar\");","map":{"version":3,"names":["React","useState","useRef","useEffect","DateTimeBar","QuantityBar","jsxDEV","_jsxDEV","BookingSearchBar","_s","showOptions","setShowOptions","selectionOptionRefs","selectionBtnRefs","toggleOption","index","prevState","newState","forEach","_","i","current","style","display","rect","getBoundingClientRect","windowHeight","window","innerHeight","bottom","top","icon","querySelector","classList","remove","add","handleClickOutside","event","isClickInside","target","closest","dateTime","document","addEventListener","removeEventListener","className","children","selectionBtnRef","el","selectionOptionRef","fileName","_jsxFileName","lineNumber","columnNumber","class","_c","$RefreshReg$"],"sources":["/Users/nguyenphucthinh/Documents/study/se100-ooad/SE100-OOAD/SE100-OOAD/user-role/src/components/BookingSearchBar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport DateTimeBar from '../components/DateTimeBar';\nimport QuantityBar from '../components/QuantityBar';\n\nfunction BookingSearchBar() {\n\n    const [showOptions, setShowOptions] = useState([false, false]); // Mảng trạng thái cho các dropdown\n    const selectionOptionRefs = useRef([]); // Mảng ref cho selectionOption\n    const selectionBtnRefs = useRef([]); // Mảng ref cho selectionBtn\n\n    const toggleOption = (index) => {\n        setShowOptions(prevState => {\n            const newState = [...prevState];\n\n            newState.forEach((_, i) => {\n                if (i !== index) {\n                    selectionOptionRefs.current[i].style.display = 'none';\n                    newState[i] = false; // Đóng dropdown ở các index khác\n                }\n            });\n\n            newState[index] = !newState[index]; // Đảo ngược trạng thái cho index cụ thể\n            if (selectionOptionRefs.current[index]) {\n                if (newState[index]) {\n                    // Khi mở dropdown\n                    selectionOptionRefs.current[index].style.display = 'block';\n                    const rect = selectionBtnRefs.current[index].getBoundingClientRect();\n                    const windowHeight = window.innerHeight;\n\n                    if (rect.bottom > windowHeight / 2) {\n                        //option xuất hiện trên btn\n                        selectionOptionRefs.current[index].style.top = 'auto';\n                        selectionOptionRefs.current[index].style.bottom = `calc(100% + 10px)`; // Cách button 10px\n                        const icon = selectionBtnRefs.current[index].querySelector('.fa-solid.fa-angle-down');\n                        if (icon) {\n                            icon.classList.remove(\"fa-angle-down\");\n                            icon.classList.add(\"fa-angle-up\");\n                        }\n                    } else {\n                        selectionOptionRefs.current[index].style.bottom = 'auto';\n                        selectionOptionRefs.current[index].style.top = `calc(100% + 5px)`; // Cách button 5px\n                        const icon = selectionBtnRefs.current[index].querySelector('.fa-solid.fa-angle-up');\n                        if (icon) {\n                            icon.classList.remove(\"fa-angle-up\");\n                            icon.classList.add(\"fa-angle-down\");\n                        }\n                    }\n                } else {\n                    // Khi đóng dropdown\n                    selectionOptionRefs.current[index].style.display = 'none';\n                }\n            }\n            return newState; // Trả về trạng thái mới\n        });\n    };\n\n    //dùng useEffect để khi click vào bất kì vị trí trong window để ẩn selection option\n    useEffect(() => {\n        const handleClickOutside = (event) => {\n            const isClickInside = event.target.closest('.selection_btn');\n            const dateTime = event.target.closest('.date_time .selection_option');\n            // Nếu click ra ngoài .selection_btn và .selection_option\n            if (!isClickInside && !dateTime) {\n                setShowOptions(prevState => {\n                    const newState = [...prevState];\n                    newState.forEach((_, i) => {\n                        // alert('hi');\n                        selectionOptionRefs.current[i].style.display = 'none';\n                        newState[i] = false; // Đóng dropdown ở các index khác\n                    });\n                    return newState;\n                });\n            }\n        };\n        // Thêm sự kiện khi component được mount\n        document.addEventListener('click', handleClickOutside);\n        // Dọn dẹp sự kiện khi component bị unmount\n        return () => {\n            document.removeEventListener('click', handleClickOutside);\n        };\n    }, []);\n\n\n    return (\n        <div className=\"booking_search_bar OpacityEffect\">\n            <DateTimeBar\n                toggleOption={() => toggleOption(0)}\n                showOptions={showOptions[0]}\n                selectionBtnRef={(el) => selectionBtnRefs.current[0] = el} // Gán ref động cho selectionBtn\n                selectionOptionRef={(el) => selectionOptionRefs.current[0] = el} // Gán ref động cho selectionOption\n            />\n            <QuantityBar\n                toggleOption={() => toggleOption(1)}\n                showOptions={showOptions[1]}\n                selectionBtnRef={(el) => selectionBtnRefs.current[1] = el} // Gán ref động cho selectionBtn\n                selectionOptionRef={(el) => selectionOptionRefs.current[1] = el} // Gán ref động cho selectionOption\n            />\n            <button class=\"booking_search_btn\">Tìm kiếm</button>\n        </div>\n    );\n\n};\n\nexport default BookingSearchBar;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAC1D,OAAOC,WAAW,MAAM,2BAA2B;AACnD,OAAOC,WAAW,MAAM,2BAA2B;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEpD,SAASC,gBAAgBA,CAAA,EAAG;EAAAC,EAAA;EAExB,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC;EAChE,MAAMW,mBAAmB,GAAGV,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;EACxC,MAAMW,gBAAgB,GAAGX,MAAM,CAAC,EAAE,CAAC,CAAC,CAAC;;EAErC,MAAMY,YAAY,GAAIC,KAAK,IAAK;IAC5BJ,cAAc,CAACK,SAAS,IAAI;MACxB,MAAMC,QAAQ,GAAG,CAAC,GAAGD,SAAS,CAAC;MAE/BC,QAAQ,CAACC,OAAO,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;QACvB,IAAIA,CAAC,KAAKL,KAAK,EAAE;UACbH,mBAAmB,CAACS,OAAO,CAACD,CAAC,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;UACrDN,QAAQ,CAACG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QACzB;MACJ,CAAC,CAAC;MAEFH,QAAQ,CAACF,KAAK,CAAC,GAAG,CAACE,QAAQ,CAACF,KAAK,CAAC,CAAC,CAAC;MACpC,IAAIH,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,EAAE;QACpC,IAAIE,QAAQ,CAACF,KAAK,CAAC,EAAE;UACjB;UACAH,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACC,OAAO,GAAG,OAAO;UAC1D,MAAMC,IAAI,GAAGX,gBAAgB,CAACQ,OAAO,CAACN,KAAK,CAAC,CAACU,qBAAqB,CAAC,CAAC;UACpE,MAAMC,YAAY,GAAGC,MAAM,CAACC,WAAW;UAEvC,IAAIJ,IAAI,CAACK,MAAM,GAAGH,YAAY,GAAG,CAAC,EAAE;YAChC;YACAd,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACQ,GAAG,GAAG,MAAM;YACrDlB,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACO,MAAM,GAAG,mBAAmB,CAAC,CAAC;YACvE,MAAME,IAAI,GAAGlB,gBAAgB,CAACQ,OAAO,CAACN,KAAK,CAAC,CAACiB,aAAa,CAAC,yBAAyB,CAAC;YACrF,IAAID,IAAI,EAAE;cACNA,IAAI,CAACE,SAAS,CAACC,MAAM,CAAC,eAAe,CAAC;cACtCH,IAAI,CAACE,SAAS,CAACE,GAAG,CAAC,aAAa,CAAC;YACrC;UACJ,CAAC,MAAM;YACHvB,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACO,MAAM,GAAG,MAAM;YACxDjB,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACQ,GAAG,GAAG,kBAAkB,CAAC,CAAC;YACnE,MAAMC,IAAI,GAAGlB,gBAAgB,CAACQ,OAAO,CAACN,KAAK,CAAC,CAACiB,aAAa,CAAC,uBAAuB,CAAC;YACnF,IAAID,IAAI,EAAE;cACNA,IAAI,CAACE,SAAS,CAACC,MAAM,CAAC,aAAa,CAAC;cACpCH,IAAI,CAACE,SAAS,CAACE,GAAG,CAAC,eAAe,CAAC;YACvC;UACJ;QACJ,CAAC,MAAM;UACH;UACAvB,mBAAmB,CAACS,OAAO,CAACN,KAAK,CAAC,CAACO,KAAK,CAACC,OAAO,GAAG,MAAM;QAC7D;MACJ;MACA,OAAON,QAAQ,CAAC,CAAC;IACrB,CAAC,CAAC;EACN,CAAC;;EAED;EACAd,SAAS,CAAC,MAAM;IACZ,MAAMiC,kBAAkB,GAAIC,KAAK,IAAK;MAClC,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,gBAAgB,CAAC;MAC5D,MAAMC,QAAQ,GAAGJ,KAAK,CAACE,MAAM,CAACC,OAAO,CAAC,8BAA8B,CAAC;MACrE;MACA,IAAI,CAACF,aAAa,IAAI,CAACG,QAAQ,EAAE;QAC7B9B,cAAc,CAACK,SAAS,IAAI;UACxB,MAAMC,QAAQ,GAAG,CAAC,GAAGD,SAAS,CAAC;UAC/BC,QAAQ,CAACC,OAAO,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;YACvB;YACAR,mBAAmB,CAACS,OAAO,CAACD,CAAC,CAAC,CAACE,KAAK,CAACC,OAAO,GAAG,MAAM;YACrDN,QAAQ,CAACG,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;UACzB,CAAC,CAAC;UACF,OAAOH,QAAQ;QACnB,CAAC,CAAC;MACN;IACJ,CAAC;IACD;IACAyB,QAAQ,CAACC,gBAAgB,CAAC,OAAO,EAAEP,kBAAkB,CAAC;IACtD;IACA,OAAO,MAAM;MACTM,QAAQ,CAACE,mBAAmB,CAAC,OAAO,EAAER,kBAAkB,CAAC;IAC7D,CAAC;EACL,CAAC,EAAE,EAAE,CAAC;EAGN,oBACI7B,OAAA;IAAKsC,SAAS,EAAC,kCAAkC;IAAAC,QAAA,gBAC7CvC,OAAA,CAACH,WAAW;MACRU,YAAY,EAAEA,CAAA,KAAMA,YAAY,CAAC,CAAC,CAAE;MACpCJ,WAAW,EAAEA,WAAW,CAAC,CAAC,CAAE;MAC5BqC,eAAe,EAAGC,EAAE,IAAKnC,gBAAgB,CAACQ,OAAO,CAAC,CAAC,CAAC,GAAG2B,EAAG,CAAC;MAAA;MAC3DC,kBAAkB,EAAGD,EAAE,IAAKpC,mBAAmB,CAACS,OAAO,CAAC,CAAC,CAAC,GAAG2B,EAAG,CAAC;IAAA;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpE,CAAC,eACF9C,OAAA,CAACF,WAAW;MACRS,YAAY,EAAEA,CAAA,KAAMA,YAAY,CAAC,CAAC,CAAE;MACpCJ,WAAW,EAAEA,WAAW,CAAC,CAAC,CAAE;MAC5BqC,eAAe,EAAGC,EAAE,IAAKnC,gBAAgB,CAACQ,OAAO,CAAC,CAAC,CAAC,GAAG2B,EAAG,CAAC;MAAA;MAC3DC,kBAAkB,EAAGD,EAAE,IAAKpC,mBAAmB,CAACS,OAAO,CAAC,CAAC,CAAC,GAAG2B,EAAG,CAAC;IAAA;MAAAE,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACpE,CAAC,eACF9C,OAAA;MAAQ+C,KAAK,EAAC,oBAAoB;MAAAR,QAAA,EAAC;IAAQ;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACnD,CAAC;AAGd;AAAC5C,EAAA,CAjGQD,gBAAgB;AAAA+C,EAAA,GAAhB/C,gBAAgB;AAiGxB;AAED,eAAeA,gBAAgB;AAAC,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}